@model StainSaver.Areas.Driver.Models.PickUpConfirmViewModel

<form id="confirmPickUpForm" enctype="multipart/form-data" method="post">
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="PickUpId" id="PickUpId" />

    <div class="mb-4">
        <label class="form-label">Items in Complain</label>
        <div class="complain-items-container">
            @if (Model.Items != null && Model.Items.Any())
            {
                foreach (var item in Model.Items)
                {
                    <div class="complain-item d-flex align-items-center mb-3 p-2 border rounded" style="height:150px; width:100%;">
                        <div class="item-image-container me-3" style="width:150px; height:130px; overflow:hidden; flex-shrink: 0;">
                            <img src="~/@item.ItemImage" alt="@item.ItemName" style="width:100%; height:100%; object-fit:contain;" />
                        </div>
                        <div class="item-name flex-grow-1">
                            <h5>@item.ItemName</h5>
                        </div>
                        <div class="me-3">
                            <button type="button" class="btn btn-outline-primary btn-sm">Action</button>
                        </div>
                    </div>
                }
            }
            else
            {
                <p>No items found for this complain.</p>
            }
        </div>
    </div>

    <div class="mb-3">
        <label asp-for="Comments" class="form-label"></label>
        <textarea asp-for="Comments" class="form-control" rows="3" placeholder="Enter comments on item condition"></textarea>
    </div>

    <div class="mb-3 d-flex flex-column align-items-start">
        <div class="d-flex align-items-center w-100">
            <label for="OtpCode" class="form-label me-3">OTP Code</label>
            <input type="text" id="OtpCode" name="OtpCode" class="form-control me-2"
                   maxlength="6" minlength="6" pattern="\d{6}"
                   placeholder="Enter 6 digit OTP code"
                   required style="max-width: 150px;" />
            <button type="button" id="verifyOtpBtn" class="btn btn-outline-success" aria-label="Verify OTP Code">
                Verify
                <span id="otpSpinner" class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
                <span id="otpStatusIcon" class="ms-2" aria-live="polite"></span>
            </button>
        </div>
        <!-- Error message below OTP field -->
        <div id="otpErrorMessage" style="color: red; margin-top: 0.25rem; font-size: 0.9rem; display: none;"></div>
    </div>

    <div class="d-grid mt-4">
        <button type="submit" class="btn btn-success">Confirm Pick-Up</button>
    </div>
</form>

<style>
    .complain-item {
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
        background-color: #fefefe;
    }
    .item-image-container img {
        border-radius: 8px;
        user-select: none;
        pointer-events: none;
    }
</style>

@section Scripts {
<script>
  
</script>
}
